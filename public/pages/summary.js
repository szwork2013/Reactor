// Generated by CoffeeScript 1.6.2
var render_summary, template, today;

template = $('#summary_template').html();

render_summary = function() {
  var date, item;

  item = $('#sel_item').val();
  date = $('#datepicker').val();
  return $.ajax({
    url: '/statistics/sampling_complete_situation/' + item + '/' + date,
    type: 'GET',
    error: function(error) {
      return console.log(error);
    },
    success: function(data) {
      return $('#content').html(Mustache.render(template, data));
    }
  });
};

$('#sel_item').change(function() {
  var value;

  value = $(this).val();
  $('#title').html(value);
  if ($('#datepicker').val()) {
    return render_summary();
  }
});

$('#datepicker').datepicker({
  format: 'yyyy-mm-dd'
}).on('changeDate', function() {
  var date;

  $('.dropdown-menu').hide();
  $(this).blur();
  date = $(this).val();
  return render_summary();
});

today = moment();

$('#datepicker').val(today.format('YYYY-MM-DD'));

render_summary();
